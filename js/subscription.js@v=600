/*
 =======================================================================*\
|| ###################################################################### ||
|| # vBulletin 6.0.0
|| # ------------------------------------------------------------------ # ||
|| # Copyright 2000-2023 MH Sub I, LLC dba vBulletin. All Rights Reserved.  # ||
|| # This file may not be redistributed in whole or significant part.   # ||
|| # ----------------- VBULLETIN IS NOT FREE SOFTWARE ----------------- # ||
|| # http://www.vbulletin.com | http://www.vbulletin.com/license.html   # ||
|| ###################################################################### ||
\*========================================================================*/
vBulletin.precache("following following_pending following_remove showing_x_subscribers showing_x_subscriptions unable_to_contact_server_please_try_again".split(" "),[]);
(function(c){if(!vBulletin.pageHasSelectors([".subscriptions-widget"]))return!1;c(function(){var n=vBulletin.tabtools,h=c(".subscriptions-widget .subscribeTabs");c(".subscriptions-tab, .subscription-list",h);var l={},g,k;c(".ui-tabs-nav > li",h).removeClass("ui-state-disabled");var e=h.find(".ui-tabs-nav > li");var m=e.filter(".ui-tabs-active");var t=m.index();$defaultTabAnchor=m.find("> a");var p=$defaultTabAnchor.data("url-path");allowTabHistory="1"==e.parent().data("allow-history");tabHistory=
new vBulletin.history.instance(allowTabHistory);var q=function(a,b,d,f,e,u,g){return n.newTab(a,b,f,e,u,null,g,c.noop,d)},r=function(a,b){b=c(".subscription-list-header .last-activity .js-arrow",b);a=a.isFilterSelected("mostactive");b.toggleClass("fa-caret-down",a).toggleClass("fa-caret-up",!a)};n.initTabs(h,tabHistory,e,allowTabHistory,t,p,[g],!1,function(a,b,d){var f=c(d);a="#"+f.prop("id");b=p==c(b).data("url-path");a in l||(l[a]=n.tabAllowHistory(f));"#subscriptionsTab"==a?(g||(subscriptionValues=
q(f,void 0,l[a],!0,!1,b,function(){r(g,f)}),g=subscriptionValues.filter),g.applyFilters(!1,!1,!1,!0)):"#subscribersTab"==a&&(k||(subscriberValues=q(f,void 0,l[a],!0,!1,b,function(){r(k,f)}),k=subscriberValues.filter),k.applyFilters(!1,!1,!1,!0))});tabHistory.isEnabled()&&(e=tabHistory.getState(),m=vBulletin.parseQueryString(location.search,["_"]),0!=Object.keys(m).length||e&&!c.isEmptyObject(e.data)||(e=location.pathname.match(/\/(subscriptions|subscribers)\/?$/),e={from:"tabs",tab:e&&e[1]||$defaultTabAnchor.data("url-path")},
tabHistory.setDefaultState(e,document.title,location.href)));actionSubscribeButton=function(){var a=c(this),b=parseInt(a.attr("data-follow-id")),d=a.attr("data-type");if(("follow_members"==d||"follow_contents"==d)&&b){var f="";f=a.hasClass("isSubscribed")?"delete":"add";vBulletin.AJAX({call:"/profile/follow-button",data:{"do":f,follower:b,type:d},success:function(c){if(1==c||"1"==c)if("delete"==f)if(a.attr("data-canusefriends")){var b="b-button--secondary";var d="isSubscribed b-button--special";var e=
"follow"}else{a.remove();return}else b="isSubscribed b-button--special",d="b-button--secondary",e="following";else 2==c&&(b="subscribepending_button b-button--secondary",d="isSubscribed b-button--special",e="following_pending");d+=" b-button--unfollow";a.addClass(b).removeClass(d).find(".js-button__text-primary").text(vBulletin.phrase.get(e))},title_phrase:"following"})}};h.offon("click",".js-subscription__follow",actionSubscribeButton);c(document).offon("click",".subscription-list-header .last-activity .js-sort",
function(){var a=c(".js-arrow",this).hasClass("fa-caret-down")?"leastactive":"mostactive",b=c(this).closest(".tab"),d="subscriptionsTab"==b.attr("id")?g:k;d.updatePageNumber(1);delete d.lastFilters;b.find(".conversation-toolbar-wrapper .toolbar-filter-overlay .filter-options input[name=filter_sort][value="+a+"]").prop("checked",!1).trigger("click")});c(document).offon("click",".subscription-list-header .subscription-name .js-sort",function(){var a=c(".js-arrow",this),b=a.hasClass("fa-caret-up")?!0:
!1,d=c(this).closest(".subscription-list-container").find(".subscription-list");$listitems=d.hasClass("js-subscribers-list")?d.find(".subscription-item .subscription-name .author"):d.find(".subscription-item .subscription-name a");$listitems.sort(function(a,d){if(b){var e=a;a=d;d=e}return c(a).text().toUpperCase().localeCompare(c(d).text().toUpperCase())});c.each($listitems,function(a,b){d.append(c(b).closest(".subscription-item"))});a.toggleClass("fa-caret-up",!b).toggleClass("fa-caret-down",b)})})})(jQuery);
